<!DOCTYPE html>
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
        <title>wavesurfer.js</title>

        <link href="data:image/gif;" rel="icon" type="image/x-icon" />

        <!-- Bootstrap -->
        <link href="//maxcdn.bootstrapcdn.com/bootstrap/3.3.1/css/bootstrap.min.css" rel="stylesheet">

        <link rel="stylesheet" href="/style.css" />
        

        <link rel="screenshot" itemprop="screenshot" href="" />

        <!-- wavesurfer.js -->
        <script src="../WaveformCreator.js"></script>
        <script src="../demo/AudioProcessor.js"></script>

    </head>

    <body itemscope itemtype="http://schema.org/WebApplication">
        <canvas id='demoCanvas' width='2000' height='256' style='width: 1000px; height: 128px;'></canvas>

        <div id="waveWrap"></div>
        <div id='wsCanvas' style='width: 1000px; height: 100px;'></div>

        <script>
        var processor = Object.create(AudioProcessor);
        var wave = Object.create(WaveformCreator);
        
        processor.bufferFile('audio.mp3', function(buffer){

                var width = 4000 / window.devicePixelRatio;

                wave.init({
                    container: document.getElementById('waveWrap'), 
                    width: 1000,
                    height: 100,
                    buffers: [
                            { buffer: buffer, fill: 'blue' },                            
                    ]
                });

                wave.init({
                    container: document.getElementById('waveWrap'), 
                    width: 1000,
                    height: 100,
                    buffers: [
                            { buffer: buffer, fill: 'blue' },
                            { buffer: buffer, fill: 'rgb(0,150,180)',
                                filter:{
                                    type: 'lowpass',
                                    freq: 50,
                                    q: 2
                                }
                            },
                            { buffer: buffer, fill: 'rgb(0,200,200)',
                                filter:{
                                    type: 'highpass',
                                    freq: 10000,
                                    q: 2
                                }
                            }
                    ]
                });

                wave.on('beforeDraw', function(){
                    
                });

                wave.on('afterDraw', function(){
                    
                });
        });

        </script>
        
    </body>
</html>
